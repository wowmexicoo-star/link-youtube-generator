<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bodycam M√©xico | Herramienta Oficial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 40px auto;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      text-align: center;
    }

    h1, h2, h3 {
      margin-bottom: 20px;
    }

    input[type="text"], button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      margin-bottom: 15px;
      border: none;
      border-radius: 6px;
    }

    button {
      background-color: #00ffd5;
      color: #000;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #00c2a8;
    }

    .hidden {
      display: none;
    }

    .output {
      margin-top: 20px;
    }

    .publicidad {
      background-color: #1f1f1f;
      padding: 12px;
      margin: 15px 0;
      border: 1px dashed #555;
    }

    #contadorUsuarios {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 20px;
      color: #00ffd5;
    }

    a {
      color: #00ffd5;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- FASE 1: LOGIN -->
    <div id="fase1">
      <div class="publicidad">[ Espacio publicitario superior ]</div>
      <div id="contadorUsuarios">+1,000,000 usuarios han usado esta herramienta</div>

      <h1>Bienvenido a Bodycam M√©xico</h1>
      <p>Para continuar, accede con tu cuenta de Google.</p>
      <p>Aceptas nuestros <a href="https://policies.google.com/terms" target="_blank">T√©rminos</a> y <a href="https://policies.google.com/privacy" target="_blank">Pol√≠tica</a>.</p>

      <div id="g_id_onload"
           data-client_id="689151884154-1v1av8v5opmn5lhderofblsimud6ccld.apps.googleusercontent.com"
           data-callback="handleCredentialResponse"
           data-auto_prompt="false">
      </div>

      <div class="g_id_signin"
           data-type="standard"
           data-shape="rectangular"
           data-theme="filled_blue"
           data-text="sign_in_with"
           data-size="large">
      </div>

      <div class="publicidad">[ Espacio publicitario inferior ]</div>
    </div>

    <!-- FASE 2: SUSCRIPCI√ìN -->
    <div id="fase2" class="hidden">
      <div class="publicidad">[ Espacio publicitario superior ]</div>
      <div id="contadorUsuarios2">+1,000,000 usuarios han usado esta herramienta</div>

      <h2>¬°Gracias por ingresar!</h2>
      <p>Suscr√≠bete a nuestro canal para acceder a herramientas exclusivas.</p>
      <button onclick="window.open('https://www.youtube.com/@BodycamFilesMx?sub_confirmation=1', '_blank')">Suscribirme al canal</button>
      <button onclick="irAFase3()">Ya me suscrib√≠, continuar</button>

      <div class="publicidad">[ Espacio publicitario inferior ]</div>
    </div>

    <!-- FASE 3: HERRAMIENTA -->
    <div id="fase3" class="hidden">
      <div class="publicidad">[ Espacio publicitario superior ]</div>
      <div id="contadorUsuarios3">+1,000,000 usuarios han usado esta herramienta</div>

      <h2>üîó Generador de Enlace de Suscripci√≥n</h2>
      <input type="text" id="inputUrl" placeholder="https://www.youtube.com/@TuCanal">
      <button onclick="generarEnlace()">Generar Enlace</button>

      <div class="output hidden" id="resultado">
        <p><strong>Tu enlace de suscripci√≥n:</strong></p>
        <div id="enlaceGenerado" style="margin-bottom:10px;"></div>
        <button onclick="copiarAlPortapapeles()">Copiar al portapapeles</button>
      </div>

      <button onclick="window.open('https://ekq782ygr591sm43-67287580762.shopifypreview.com/products_preview?preview_key=5e27021510b7e07077a4bd794df31671', '_blank')">üìò Ver gu√≠a completa para monetizar</button>
      <button onclick="irAFase4()">üìπ Ver c√≥mo unirte al programa</button>

      <div class="publicidad">[ Espacio publicitario inferior ]</div>
    </div>

    <!-- FASE 4: VIDEO + FORMULARIO -->
    <div id="fase4" class="hidden">
      <div class="publicidad">[ Espacio publicitario superior ]</div>
      <div id="contadorUsuarios4">+1,000,000 usuarios han usado esta herramienta</div>

      <h2>√önete al proyecto de creadores</h2>
      <p>Mira este breve video donde te explicamos c√≥mo formar parte del equipo:</p>
      <div style="background:#111;padding:20px;border-radius:10px;margin-bottom:15px;">
        <p>üé• Aqu√≠ ir√° tu video explicativo (en cuanto est√© listo)</p>
      </div>
      <button onclick="window.open('https://forms.gle/urXPCE2hpKkrjBpF9', '_blank')">üìù Rellenar formulario de registro</button>

      <div class="publicidad">[ Espacio publicitario inferior ]</div>
    </div>
  </div>

  <script>
    function irAFase2() {
      document.getElementById('fase1').classList.add('hidden');
      document.getElementById('fase2').classList.remove('hidden');
    }

    function irAFase3() {
      document.getElementById('fase2').classList.add('hidden');
      document.getElementById('fase3').classList.remove('hidden');
    }

    function irAFase4() {
      document.getElementById('fase3').classList.add('hidden');
      document.getElementById('fase4').classList.remove('hidden');
    }

    function generarEnlace() {
      const input = document.getElementById("inputUrl").value.trim();
      const resultado = document.getElementById("resultado");
      const enlaceGenerado = document.getElementById("enlaceGenerado");

      if (!input || !input.includes("youtube.com")) {
        alert("Por favor ingresa un URL v√°lido de YouTube.");
        return;
      }

      const enlace = input.includes("?") ? input + "&sub_confirmation=1" : input + "?sub_confirmation=1";
      enlaceGenerado.textContent = enlace;
      resultado.classList.remove("hidden");
    }

    function copiarAlPortapapeles() {
      const texto = document.getElementById("enlaceGenerado").textContent;
      navigator.clipboard.writeText(texto).then(() => {
        alert("Enlace copiado al portapapeles");
      });
    }

    function actualizarContador(id) {
      const el = document.getElementById(id);
      let contador = 1000000;
      setInterval(() => {
        contador += Math.floor(Math.random() * 5);
        el.textContent = "+" + contador.toLocaleString("es-MX") + " usuarios han usado esta herramienta";
      }, 3000);
    }

    actualizarContador("contadorUsuarios");
    actualizarContador("contadorUsuarios2");
    actualizarContador("contadorUsuarios3");
    actualizarContador("contadorUsuarios4");

    function handleCredentialResponse(response) {
      const jwt = parseJwt(response.credential);
      const nombre = jwt.name;
      const correo = jwt.email;

      fetch("https://formspree.io/f/mvgqvgon", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          Nombre: nombre,
          Correo: correo
        })
      });

      irAFase2();
    }

    function parseJwt(token) {
      return JSON.parse(atob(token.split('.')[1]));
    }
  </script>
</body>
</html>
